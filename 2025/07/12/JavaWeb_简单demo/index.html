<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>JavaWeb_简单demo | Welcome,here is Mogu's Blog</title><meta name="author" content="Mogu"><meta name="copyright" content="Mogu"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="完整（比较）三层+oss服务">
<meta property="og:type" content="article">
<meta property="og:title" content="JavaWeb_简单demo">
<meta property="og:url" content="https://szymogu.github.io/2025/07/12/JavaWeb_%E7%AE%80%E5%8D%95demo/index.html">
<meta property="og:site_name" content="Welcome,here is Mogu&#39;s Blog">
<meta property="og:description" content="完整（比较）三层+oss服务">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://szymogu.github.io/pic/default_cover/424358.png">
<meta property="article:published_time" content="2025-07-12T03:03:38.000Z">
<meta property="article:modified_time" content="2025-07-12T03:18:41.615Z">
<meta property="article:author" content="Mogu">
<meta property="article:tag" content="Web后端">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://szymogu.github.io/pic/default_cover/424358.png"><link rel="shortcut icon" href="/pic/logo.png"><link rel="canonical" href="https://szymogu.github.io/2025/07/12/JavaWeb_%E7%AE%80%E5%8D%95demo/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://chinese-fonts-cdn.deno.dev/packages/jnjj/dist/JUNJUN/result.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Error',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"You have switched to Traditional Chinese","cht_to_chs":"You have switched to Simplified Chinese","day_to_night":"You have switched to Dark Mode","night_to_day":"You have switched to Light Mode","bgLight":"#87cefa","bgDark":"#1f1f1f","position":"bottom-left"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'JavaWeb_简单demo',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-07-12 11:18:41'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/css/card-bg.css"><link rel="stylesheet" href="/css/neon.css"><link rel="stylesheet" href="/css/page-header.css"><link rel="stylesheet" href="/css/page-footer.css"><meta name="generator" content="Hexo 7.2.0"></head><body><script>window.paceOptions = {
  restartOnPushState: false
}

document.addEventListener('pjax:send', () => {
  Pace.restart()
})
</script><link rel="stylesheet" href="/css/corner-indicator.css"/><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/pic/touxiang.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">51</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">42</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">17</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> Gallery</span></a></li><li><a class="site-page child" href="/Java_Page/"><i class="fa-fw fas"></i><span> Test1</span></a></li><li><a class="site-page child" href="/Hexo_Page/"><i class="fa-fw fas"></i><span> Test2</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/pic/default_cover/424358.png')"><nav id="nav"><span id="blog-info"><a href="/" title="Welcome,here is Mogu's Blog"><span class="site-name">Welcome,here is Mogu's Blog</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> Gallery</span></a></li><li><a class="site-page child" href="/Java_Page/"><i class="fa-fw fas"></i><span> Test1</span></a></li><li><a class="site-page child" href="/Hexo_Page/"><i class="fa-fw fas"></i><span> Test2</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">JavaWeb_简单demo</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2025-07-12T03:03:38.000Z" title="Created 2025-07-12 11:03:38">2025-07-12</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-07-12T03:18:41.615Z" title="Updated 2025-07-12 11:18:41">2025-07-12</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Web%E5%90%8E%E7%AB%AF/">Web后端</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="JavaWeb_简单demo"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post Views:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>在完成后端项目的学习后，来完成一个demo吧</p>
<p>根据开发文档，前端页面已经完成了，现在需要完成后端项目，任务分为三块</p>
<ul>
<li><p>接收前端请求</p>
</li>
<li><p>完成逻辑</p>
</li>
<li><p>与数据库交互</p>
</li>
</ul>
<p>而这三块任务恰好对应web后端的三层架构</p>
<p>控制层Controller</p>
<p>逻辑层Service</p>
<p>持久层Mapper</p>
<p>创建SpringBoot项目，添加依赖</p>
<ul>
<li>SpringWeb</li>
<li>MySQL Driver</li>
<li>Mybatis Framework</li>
<li>Lombok</li>
</ul>
<p>创建四个包，对应三层架构和一些普通类</p>
<p>此外，运用面向接口编程思想，先抽象出类的功能，再完成他的各种实现方式</p>
<p>由于我总是忘记不同层的注解,这里再贴一遍吧😣(详见分层解耦)</p>
<p>三个Component的衍生注解</p>
<ul>
<li><p>Controller 标注控制器类</p>
</li>
<li><p>Service 标注逻辑类</p>
</li>
<li><p>Repository 标注数据访问类</p>
</li>
</ul>
<p>从Controller层开始吧</p>
<h2 id="查"><a href="#查" class="headerlink" title="查"></a>查</h2><p>根据需求，需要<strong>查询</strong>所有部门信息，分析需求：</p>
<p>前端发送请求，路径为&#x2F;depts，Controller层要添加这个路径的处理方法</p>
<p>完成查询所有部门的逻辑，由Controller调用逻辑层对应方法处理需求</p>
<p>由于需要使用数据库数据，逻辑层要调用持久层，持久层完成与数据库的交互，并将数据返回</p>
<p>DeptController</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span><span class="comment">//日志注解</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DeptController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    DeptService deptService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/depts&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">ListDept</span><span class="params">()</span> &#123;</span><br><span class="line">        log.info(<span class="string">&quot;查询全部部门数据&quot;</span>);</span><br><span class="line">        List&lt;Dept&gt; list = deptService.listDept();</span><br><span class="line">        <span class="keyword">return</span> Result.success(list);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这里有一些要点：</p>
<ul>
<li><p>Slf4j：这是lombok提供的关于日志的注解，使用这个注解为日志操作添加一层抽象，即允许开发者在代码中使用一个统一的 API 进行日志记录，而具体的日志实现可以在编译后通过依赖库(如log4j)的形式进行替换（和不久前接触到的JDBC很相似，关键在于抽象，只提供标准，不提供具体实现),这个注解会创建一个名为log的日志对象(检测到同名对象时不会创建),直接调用即可</p>
<p>自己创建日志对象是这样的</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="type">Logger</span> <span class="variable">log</span> <span class="operator">=</span> LoggerFactory.getLogger(DeptController.class);</span><br></pre></td></tr></table></figure>
</li>
<li><p>RestController: 是Controller的一个特殊化注解，专门用于RESTful Web服务，返回JSON或XML等数据格式,传统的MVC架构中需要使用Controller注解处理web请求用于返回一个视图(如html),RestController直接返回数据，不涉及视图</p>
</li>
<li><p>Autowired: 自动注入注解,这是逻辑层的接口,但在ioc池里管理的却是实现该接口的具体类,自动注入时会将具体类注入到这里(多态)</p>
</li>
<li><p>GetMapping: 这是Spring提供的注解，用于标注方法应处理Get请求，而不是任意类型，原先使用RequestMapping注解标注方法用于处理请求,不添加其他参数时是可以接收任意类型的请求的,如果要限制处理请求类型,可以添加参数method</p>
<p><code>@RequestMapping(value = &quot;/depts&quot;,method = RequestMethod.GET)</code>,GetMapping注解底层就是在RequestMapping上添加method参数为RequetMethod.GET</p>
</li>
<li><p>Result.success(): 统一响应结果,Result是一个简单类,包装了响应格式,success是一个静态方法,可以将接收参数作为返回值的一部分</p>
</li>
</ul>
<p>DeptService</p>
<p>完成接口,添加抽象方法表示查询操作:返回一个集合</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">DeptService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;Dept&gt; <span class="title function_">listDept</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>实现接口</p>
<p>DeptServiceImpl</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DeptServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">DeptService</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    DeptMapper deptMapper;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Dept&gt; <span class="title function_">listDept</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> deptMapper.listDept();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这里没什么要点,注意deptMapper同样是多态用法</p>
<p>最后就是数据访问层了</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">DeptMapper</span> &#123;</span><br><span class="line">    <span class="meta">@Select(&quot;select * from dept&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Dept&gt; <span class="title function_">listDept</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这里又有一些要点:</p>
<ul>
<li>Mapper注解: Spring提供Repository注解用于标注数据访问层,而Mybatis提供的Mapper注解也是类似的作用,但Mapper能将接口映射到SQL语句,使得MyBatis能够生成该接口的实现类，并将SQL语句与接口方法关联,如listDept关联了一个Select方法</li>
<li>Select注解: Mybatis提供的注解,用于在接口方法上直接编写 SQL 查询语句，而不需要在 XML 映射文件中编写,当然还有很多类似的注解,一般与sql操作的关键词相关</li>
</ul>
<p>基本结构编写完毕,准备测试的时候发现数据库是空的😪</p>
<p>建表吧</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 部门管理</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> dept(</span><br><span class="line">    id <span class="type">int</span> unsigned <span class="keyword">primary</span> key auto_increment comment <span class="string">&#x27;主键ID&#x27;</span>,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">10</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">unique</span> comment <span class="string">&#x27;部门名称&#x27;</span>,</span><br><span class="line">    create_time datetime <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;创建时间&#x27;</span>,</span><br><span class="line">    update_time datetime <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;修改时间&#x27;</span></span><br><span class="line">) comment <span class="string">&#x27;部门表&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> dept (id, name, create_time, update_time) <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;学工部&#x27;</span>,now(),now()),(<span class="number">2</span>,<span class="string">&#x27;教研部&#x27;</span>,now(),now()),(<span class="number">3</span>,<span class="string">&#x27;咨询部&#x27;</span>,now(),now()), (<span class="number">4</span>,<span class="string">&#x27;就业部&#x27;</span>,now(),now()),(<span class="number">5</span>,<span class="string">&#x27;人事部&#x27;</span>,now(),now());</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 员工管理(带约束)</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> emp (</span><br><span class="line">  id <span class="type">int</span> unsigned <span class="keyword">primary</span> key auto_increment comment <span class="string">&#x27;ID&#x27;</span>,</span><br><span class="line">  username <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">unique</span> comment <span class="string">&#x27;用户名&#x27;</span>,</span><br><span class="line">  password <span class="type">varchar</span>(<span class="number">32</span>) <span class="keyword">default</span> <span class="string">&#x27;123456&#x27;</span> comment <span class="string">&#x27;密码&#x27;</span>,</span><br><span class="line">  name <span class="type">varchar</span>(<span class="number">10</span>) <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;姓名&#x27;</span>,</span><br><span class="line">  gender tinyint unsigned <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;性别, 说明: 1 男, 2 女&#x27;</span>,</span><br><span class="line">  image <span class="type">varchar</span>(<span class="number">300</span>) comment <span class="string">&#x27;图像&#x27;</span>,</span><br><span class="line">  job tinyint unsigned comment <span class="string">&#x27;职位, 说明: 1 班主任,2 讲师, 3 学工主管, 4 教研主管, 5 咨询师&#x27;</span>,</span><br><span class="line">  entrydate <span class="type">date</span> comment <span class="string">&#x27;入职时间&#x27;</span>,</span><br><span class="line">  dept_id <span class="type">int</span> unsigned comment <span class="string">&#x27;部门ID&#x27;</span>,</span><br><span class="line">  create_time datetime <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;创建时间&#x27;</span>,</span><br><span class="line">  update_time datetime <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;修改时间&#x27;</span></span><br><span class="line">) comment <span class="string">&#x27;员工表&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp</span><br><span class="line">    (id, username, password, name, gender, image, job, entrydate,dept_id, create_time, update_time) <span class="keyword">VALUES</span></span><br><span class="line">    (<span class="number">1</span>,<span class="string">&#x27;jinyong&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;金庸&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;1.jpg&#x27;</span>,<span class="number">4</span>,<span class="string">&#x27;2000-01-01&#x27;</span>,<span class="number">2</span>,now(),now()),</span><br><span class="line">    (<span class="number">2</span>,<span class="string">&#x27;zhangwuji&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;张无忌&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;2.jpg&#x27;</span>,<span class="number">2</span>,<span class="string">&#x27;2015-01-01&#x27;</span>,<span class="number">2</span>,now(),now()),</span><br><span class="line">    (<span class="number">3</span>,<span class="string">&#x27;yangxiao&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;杨逍&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;3.jpg&#x27;</span>,<span class="number">2</span>,<span class="string">&#x27;2008-05-01&#x27;</span>,<span class="number">2</span>,now(),now()),</span><br><span class="line">    (<span class="number">4</span>,<span class="string">&#x27;weiyixiao&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;韦一笑&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;4.jpg&#x27;</span>,<span class="number">2</span>,<span class="string">&#x27;2007-01-01&#x27;</span>,<span class="number">2</span>,now(),now()),</span><br><span class="line">    (<span class="number">5</span>,<span class="string">&#x27;changyuchun&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;常遇春&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;5.jpg&#x27;</span>,<span class="number">2</span>,<span class="string">&#x27;2012-12-05&#x27;</span>,<span class="number">2</span>,now(),now()),</span><br><span class="line">    (<span class="number">6</span>,<span class="string">&#x27;xiaozhao&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;小昭&#x27;</span>,<span class="number">2</span>,<span class="string">&#x27;6.jpg&#x27;</span>,<span class="number">3</span>,<span class="string">&#x27;2013-09-05&#x27;</span>,<span class="number">1</span>,now(),now()),</span><br><span class="line">    (<span class="number">7</span>,<span class="string">&#x27;jixiaofu&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;纪晓芙&#x27;</span>,<span class="number">2</span>,<span class="string">&#x27;7.jpg&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;2005-08-01&#x27;</span>,<span class="number">1</span>,now(),now()),</span><br><span class="line">    (<span class="number">8</span>,<span class="string">&#x27;zhouzhiruo&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;周芷若&#x27;</span>,<span class="number">2</span>,<span class="string">&#x27;8.jpg&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;2014-11-09&#x27;</span>,<span class="number">1</span>,now(),now()),</span><br><span class="line">    (<span class="number">9</span>,<span class="string">&#x27;dingminjun&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;丁敏君&#x27;</span>,<span class="number">2</span>,<span class="string">&#x27;9.jpg&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;2011-03-11&#x27;</span>,<span class="number">1</span>,now(),now()),</span><br><span class="line">    (<span class="number">10</span>,<span class="string">&#x27;zhaomin&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;赵敏&#x27;</span>,<span class="number">2</span>,<span class="string">&#x27;10.jpg&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;2013-09-05&#x27;</span>,<span class="number">1</span>,now(),now()),</span><br><span class="line">    (<span class="number">11</span>,<span class="string">&#x27;luzhangke&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;鹿杖客&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;11.jpg&#x27;</span>,<span class="number">5</span>,<span class="string">&#x27;2007-02-01&#x27;</span>,<span class="number">3</span>,now(),now()),</span><br><span class="line">    (<span class="number">12</span>,<span class="string">&#x27;hebiweng&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;鹤笔翁&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;12.jpg&#x27;</span>,<span class="number">5</span>,<span class="string">&#x27;2008-08-18&#x27;</span>,<span class="number">3</span>,now(),now()),</span><br><span class="line">    (<span class="number">13</span>,<span class="string">&#x27;fangdongbai&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;方东白&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;13.jpg&#x27;</span>,<span class="number">5</span>,<span class="string">&#x27;2012-11-01&#x27;</span>,<span class="number">3</span>,now(),now()),</span><br><span class="line">    (<span class="number">14</span>,<span class="string">&#x27;zhangsanfeng&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;张三丰&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;14.jpg&#x27;</span>,<span class="number">2</span>,<span class="string">&#x27;2002-08-01&#x27;</span>,<span class="number">2</span>,now(),now()),</span><br><span class="line">    (<span class="number">15</span>,<span class="string">&#x27;yulianzhou&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;俞莲舟&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;15.jpg&#x27;</span>,<span class="number">2</span>,<span class="string">&#x27;2011-05-01&#x27;</span>,<span class="number">2</span>,now(),now()),</span><br><span class="line">    (<span class="number">16</span>,<span class="string">&#x27;songyuanqiao&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;宋远桥&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;16.jpg&#x27;</span>,<span class="number">2</span>,<span class="string">&#x27;2007-01-01&#x27;</span>,<span class="number">2</span>,now(),now()),</span><br><span class="line">    (<span class="number">17</span>,<span class="string">&#x27;chenyouliang&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;陈友谅&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;17.jpg&#x27;</span>,<span class="keyword">NULL</span>,<span class="string">&#x27;2015-03-21&#x27;</span>,<span class="keyword">NULL</span>,now(),now());</span><br></pre></td></tr></table></figure>

<p>启动spring项目,spring会使用内置的Tomcat服务器,并占用我们事先配置好的端口(8080)</p>
<p><code>o.s.b.w.embedded.tomcat.TomcatWebServer : Tomcat initialized with port 8080 (http)</code></p>
<p>在进行前后端调联之前,可以对接口先进行一个测试——打开postman</p>
<p>向服务器所在端口发送GET请求：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8080/depts</span><br></pre></td></tr></table></figure>

<p>请求成功，再试试其他请求方式，先来个POST？</p>
<p>返回结果表明：❌ 错误信息为: “Method Not Allowed”，表明我们的GetMapper注解起作用了</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;timestamp&quot;: &quot;2024-09-19T09:21:01.971+00:00&quot;,</span><br><span class="line">    &quot;status&quot;: 405,</span><br><span class="line">    &quot;error&quot;: &quot;Method Not Allowed&quot;,</span><br><span class="line">    &quot;path&quot;: &quot;/depts&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>现在可以尝试前后端调联了</p>
<p>运行前端项目使用的服务器Nginx，占用端口90，在浏览器中访问这个端口</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:90/</span><br></pre></td></tr></table></figure>

<p>点击部门管理，不出意外的话，已经完成了数据库的数据展示，表明调联成功</p>
<p>总算完成查找操作了，接下来继续完成删改增吧</p>
<h2 id="删"><a href="#删" class="headerlink" title="删"></a>删</h2><p>文档中是这么写的：</p>
<blockquote>
<p>请求路径：&#x2F;depts&#x2F;{id}</p>
<p>请求方式：DELETE</p>
<p>接口描述：该接口用于根据ID删除部门数据</p>
</blockquote>
<p>也就是说，请求路径中会携带需要删除数据的id，这个id还是一个变量，要怎么分离这个参数呢</p>
<p>老规矩，先分析需求：其实还是三层之间相互调用，只是这次需要处理一个参数id</p>
<p>controller-》service-》mapper</p>
<h3 id="Controller"><a href="#Controller" class="headerlink" title="Controller"></a>Controller</h3><p>DeptController</p>
<p>由于这个操作也与表Dept有关，所以跟查询操作的请求处理方法放在同一个类中即可</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@DeleteMapping(&quot;/depts/&#123;id&#125;&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> Result <span class="title function_">deleteDept</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span> &#123;</span><br><span class="line">       log.info(<span class="string">&quot;删除id=&#123;&#125;的部门&quot;</span>,id);</span><br><span class="line">       deptService.deleteDept(id);</span><br><span class="line">       <span class="keyword">return</span> Result.success();</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>大部分与查询操作一样，还是那个问题，怎么分离<strong>路径中</strong>的参数：使用PathVariable注解（详见服务器的请求与相应），这个注解可以提取路径中同名的参数</p>
<p>还有一件事~DeleteMapping：专注Delete操作的RequestMapping</p>
<h3 id="Service"><a href="#Service" class="headerlink" title="Service"></a>Service</h3><p>逻辑层接口抽象方法++</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">deleteDept</span><span class="params">(<span class="type">int</span> id)</span>;</span><br></pre></td></tr></table></figure>

<p>实现方法</p>
<p>DeptServiceImpl</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">DeleteEmp</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">    empMapper.DeleteEmp(id);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Mapper"><a href="#Mapper" class="headerlink" title="Mapper"></a>Mapper</h3><p>简单的一个删除语句</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Delete(&quot;delete from dept where id = #&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">deleteDept</span><span class="params">(<span class="type">int</span> id)</span>;</span><br></pre></td></tr></table></figure>

<p>*相信你知道#{}是什么意思：获取方法中的形参</p>
<p>测试时选择一个讨厌的部门，直接给他✂掉，<del>也是当上老板辽</del></p>
<h2 id="增"><a href="#增" class="headerlink" title="增"></a>增</h2><p>文档描述：</p>
<p>请求路径：&#x2F;depts</p>
<p>请求方式：POST</p>
<p>接口描述：该接口用于添加部门数据</p>
<p>由于请求类型是POST，说明有请求体</p>
<p>请求参数</p>
<p>格式：application&#x2F;json</p>
<p>类型：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>是否必须</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>name</td>
<td>String</td>
<td>否</td>
<td>部门名称</td>
</tr>
</tbody></table>
<p>前端向后端发送请求时，会携带一个json格式请求体，这个请求体中有一些参数，如何提取请求体中的参数呢？</p>
<p>使用<strong>RequestBody</strong>注解将请求体参数映射到对象上，参数名与对象中的变量名相同时就能自动映射了（详见服务器的请求与响应）</p>
<h3 id="Controller-1"><a href="#Controller-1" class="headerlink" title="Controller"></a>Controller</h3><p>DeptController</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/depts&quot;)</span>  </span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">addDept</span><span class="params">(<span class="meta">@RequestBody</span> Dept dept)</span> &#123;  </span><br><span class="line">    log.info(<span class="string">&quot;添加名为&#123;&#125;的部门&quot;</span>,dept.getName());  </span><br><span class="line">    deptService.insertDept(dept);  </span><br><span class="line">    <span class="keyword">return</span> Result.success();  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Service-1"><a href="#Service-1" class="headerlink" title="Service"></a>Service</h3><p>添加的数据实际上有四个值：id，name，createtime，updatetime，其中只有name是需要从前端接收的，其他字段都是在逻辑层处理后，交给数据访问层（id主键会自动添加）</p>
<p>DeptServiceImpl</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span>  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insertDept</span><span class="params">(Dept dept)</span> &#123;  </span><br><span class="line">    <span class="type">LocalDateTime</span> <span class="variable">createTime</span> <span class="operator">=</span> LocalDateTime.now();  </span><br><span class="line">    <span class="type">LocalDateTime</span> <span class="variable">updateTime</span> <span class="operator">=</span> LocalDateTime.now();  </span><br><span class="line">    dept.setCreateTime(createTime);  </span><br><span class="line">    dept.setUpdateTime(updateTime);  </span><br><span class="line">    deptMapper.insertDept(dept);  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Mapper-1"><a href="#Mapper-1" class="headerlink" title="Mapper"></a>Mapper</h3><p>添加增方法</p>
<p>DeptMapper</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Insert(&quot;insert into dept(name,create_time,update_time) values(#&#123;name&#125;,#&#123;createTime&#125;,#&#123;updateTime&#125;)&quot;)</span>  </span><br><span class="line"><span class="keyword">void</span> <span class="title function_">insertDept</span><span class="params">(Dept dept)</span>;</span><br></pre></td></tr></table></figure>

<p>注意sql中添加数据的语法</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> 表名 (字段名<span class="number">1</span>,字段名<span class="number">2</span>) <span class="keyword">values</span> (值<span class="number">1</span>,值<span class="number">2</span>);</span><br></pre></td></tr></table></figure>

<h2 id="改"><a href="#改" class="headerlink" title="改"></a>改</h2><p>文档描述：</p>
<p>请求路径：&#x2F;depts</p>
<p>请求方式：PUT</p>
<p>接口描述：该接口用于修改部门数据</p>
<p>在点击部门的修改按钮后，弹出的文本框内要<strong>先展示当前部门的名字</strong>，也就是说要先完成根据id查询名字的功能，再添加修改部门名字的功能</p>
<h3 id="展示数据"><a href="#展示数据" class="headerlink" title="展示数据"></a>展示数据</h3><p>根据抓包工具，得到查询名字使用的是Get，所以将控制层接口设置为</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/&#123;id&#125;&quot;)</span>  </span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">getDeptById</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span> &#123;  </span><br><span class="line">    log.info(<span class="string">&quot;查询id=&#123;&#125;的部门&quot;</span>,id);  </span><br><span class="line">    <span class="type">Dept</span> <span class="variable">dept</span> <span class="operator">=</span> deptService.getDeptById(id);  </span><br><span class="line">    <span class="keyword">return</span> Result.success(dept);  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>DeptService</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span>  </span><br><span class="line"><span class="keyword">public</span> Dept <span class="title function_">getDeptById</span><span class="params">(Integer id)</span> &#123;  </span><br><span class="line">    <span class="type">Dept</span> <span class="variable">dept</span> <span class="operator">=</span> deptMapper.getDeptById(id);  </span><br><span class="line">    <span class="keyword">return</span> dept;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>DeptMapper</p>
<p>根据id查询部门信息并返回，前端自己解析需要展示的数据（name）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Select(&quot;select * from dept where id=#&#123;id&#125;&quot;)</span></span><br><span class="line">Dept <span class="title function_">getDeptById</span><span class="params">(Integer id)</span>;</span><br></pre></td></tr></table></figure>

<h3 id="修改数据"><a href="#修改数据" class="headerlink" title="修改数据"></a>修改数据</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PutMapping</span>  </span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">updateDept</span><span class="params">(<span class="meta">@RequestBody</span> Dept dept)</span> &#123;  </span><br><span class="line">    log.info(<span class="string">&quot;更新id为&#123;&#125;部门的名称为&#123;&#125;&quot;</span>,dept.getId(),dept.getName());  </span><br><span class="line">    deptService.updateDept(dept);  </span><br><span class="line">    <span class="keyword">return</span> Result.success();  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>DeptSevice</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span>  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateDept</span><span class="params">(Dept dept)</span> &#123;  </span><br><span class="line">    dept.setUpdateTime(LocalDateTime.now());  </span><br><span class="line">    deptMapper.updateDept(dept);  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>DeptMapper</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Update(&quot;update dept set name = #&#123;name&#125;,update_time = #&#123;updateTime&#125; where id = #&#123;id&#125;&quot;)</span>  </span><br><span class="line"><span class="keyword">void</span> <span class="title function_">updateDept</span><span class="params">(Dept dept)</span>;</span><br></pre></td></tr></table></figure>

<p>sql中更新操作的语法</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> 表名 <span class="keyword">set</span> 字段名<span class="number">1</span><span class="operator">=</span>值<span class="number">1</span>,字段名<span class="number">2</span><span class="operator">=</span>值<span class="number">2</span>,…[<span class="keyword">where</span> 条件];</span><br></pre></td></tr></table></figure>

<p>此时部门查询页面的功能就完成了，接下来是员工查询页面</p>
<h2 id="分页查询"><a href="#分页查询" class="headerlink" title="分页查询"></a>分页查询</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span>  </span><br><span class="line"><span class="meta">@RestController</span>  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmpController</span> &#123;  </span><br><span class="line"><span class="meta">@GetMapping(&quot;/emps&quot;)</span>  </span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">GetEmps</span><span class="params">(<span class="meta">@RequestParam(defaultValue = &quot;1&quot;)</span> <span class="type">int</span> page,  </span></span><br><span class="line"><span class="params">                      <span class="meta">@RequestParam(defaultValue = &quot;10&quot;)</span> <span class="type">int</span> pageSize)</span> &#123;  </span><br><span class="line">    log.info(<span class="string">&quot;分页查询员工&quot;</span>);  </span><br><span class="line">    <span class="type">PageBean</span> <span class="variable">pageBean</span> <span class="operator">=</span> empService.getEmp(page,pageSize);<span class="comment">//当前页，一页展示条数  </span></span><br><span class="line">    <span class="keyword">return</span> Result.success(pageBean);  </span><br><span class="line">&#125;&#125;</span><br></pre></td></tr></table></figure>

<p>RequestParam在之前用于指定复杂类型的数据绑定，这里使用他完成了默认值的设置</p>
<p>PageBean是页对象，内部有页面数据集合，页面数据量</p>
<p>EmpServiceImpl</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span>  </span><br><span class="line"><span class="keyword">public</span> PageBean <span class="title function_">getEmp</span><span class="params">(<span class="type">int</span> page, <span class="type">int</span> pageSize)</span> &#123;  </span><br><span class="line">    <span class="type">Long</span> <span class="variable">count</span> <span class="operator">=</span> empMapper.count();  </span><br><span class="line">    <span class="type">Integer</span> <span class="variable">point</span> <span class="operator">=</span> (page-<span class="number">1</span>)*pageSize;  </span><br><span class="line">    List&lt;Emp&gt; list = empMapper.getEmp(point,pageSize);  </span><br><span class="line">    <span class="type">PageBean</span> <span class="variable">pageBean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PageBean</span>(count,list);  </span><br><span class="line">    <span class="keyword">return</span> pageBean;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>empMapper</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Select(&quot;select * from emp limit #&#123;point&#125;,#&#123;pageSize&#125;&quot;)</span></span><br><span class="line">List&lt;Emp&gt; <span class="title function_">getEmp</span><span class="params">(Integer point,Integer pageSize)</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Select(&quot;select count(*) from emp&quot;)</span></span><br><span class="line">Long <span class="title function_">count</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure>

<p>这样就算是完成了，分页查询的步骤为</p>
<ul>
<li>完成页面基本数据查询</li>
<li>封装数据</li>
</ul>
<p>由于分页查询的流程固定，所以出现了一些插件，可以简化分页查询操作</p>
<h3 id="pagehelper"><a href="#pagehelper" class="headerlink" title="pagehelper"></a>pagehelper</h3><p>依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.pagehelper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pagehelper-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>empServiceImpl</p>
<p>在需要进行分页的 MyBatis 查询方法前调用 <code>PageHelper.startPage</code> 静态方法即可，紧跟在这个方法后的第一个<strong>MyBatis 查询方法</strong>会被进行分页</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span>  </span><br><span class="line"><span class="keyword">public</span> PageBean <span class="title function_">getEmp</span><span class="params">(Integer page, Integer pageSize)</span> &#123;</span><br><span class="line">    <span class="comment">//设置分页参数  </span></span><br><span class="line">    PageHelper.startPage(page, pageSize);</span><br><span class="line">    <span class="comment">//执行查询  </span></span><br><span class="line">    List&lt;Emp&gt; list = empMapper.listEmp();  </span><br><span class="line">    Page&lt;Emp&gt; p =(Page&lt;Emp&gt;) list;<span class="comment">//分页时，实际返回的结果list类型是Page&lt;E&gt;，如果想取出分页信息，需要强制转换为Page&lt;E&gt;</span></span><br><span class="line">    <span class="comment">//封装数据</span></span><br><span class="line">    <span class="type">PageBean</span> <span class="variable">pageBean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PageBean</span>(p.getTotal(),p.getResult());  </span><br><span class="line">    <span class="keyword">return</span> pageBean;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>empMapper</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Select(&quot;select * from emp&quot;)</span>  </span><br><span class="line"><span class="keyword">public</span> List&lt;Emp&gt; <span class="title function_">listEmp</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure>

<p>测试时查看控制台，发现插件完成查询语句生成</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">==&gt;  Preparing: SELECT count(0) FROM emp//统计记录数</span><br><span class="line">==&gt; Parameters: </span><br><span class="line">&lt;==    Columns: count(0)</span><br><span class="line">&lt;==        Row: 16</span><br><span class="line">&lt;==      Total: 1</span><br><span class="line">==&gt;  Preparing: select * from emp LIMIT ?//分页查询</span><br><span class="line">==&gt; Parameters: 5(Integer)</span><br></pre></td></tr></table></figure>

<h2 id="完成条件查询"><a href="#完成条件查询" class="headerlink" title="完成条件查询"></a>完成条件查询</h2><p>员工查询页面还提供了一些可选的查询条件：姓名，性别，入职日期区间，为这些条件添加对应形参，添加到请求处理方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/emps&quot;)</span>  </span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">GetEmps</span><span class="params">(<span class="meta">@RequestParam(defaultValue = &quot;1&quot;)</span> <span class="type">int</span> page,  </span></span><br><span class="line"><span class="params">                      <span class="meta">@RequestParam(defaultValue = &quot;10&quot;)</span> <span class="type">int</span> pageSize,  </span></span><br><span class="line"><span class="params">                      String name, Short gender,  </span></span><br><span class="line"><span class="params">                      <span class="meta">@DateTimeFormat(pattern = &quot;yyyy-mm-dd&quot;)</span> LocalDate begin,  </span></span><br><span class="line"><span class="params">                      <span class="meta">@DateTimeFormat(pattern = &quot;yyyy-mm-dd&quot;)</span> LocalDate end)</span> &#123;  </span><br><span class="line">    log.info(<span class="string">&quot;分页查询员工&quot;</span>);  </span><br><span class="line">    <span class="type">PageBean</span> <span class="variable">pageBean</span> <span class="operator">=</span> empService.getEmp(page,pageSize,name,gender,begin,end);<span class="comment">//当前页，一页展示条数  </span></span><br><span class="line">    <span class="keyword">return</span> Result.success(pageBean);  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>DateTimeFormat 是 Java 中 java.text 包中的一个类，用于格式化和解析日期和时间。它提供了对日期和时间模式的支持，允许你定义日期和时间的格式，然后使用这些格式来格式化 Date 对象为字符串，或者将字符串解析为 Date 对象</p>
</blockquote>
<p>EmpServiceImpl</p>
<p>除了分页查询用到的两个参数，添加条件查询用到的形参</p>
<p>PageHelper.startPage(page, pageSize);&#x2F;&#x2F;首先使用分页查询参数完成插件配置</p>
<p>List list &#x3D; empMapper.listEmp(name,gender,begin,end);&#x2F;&#x2F;该条件查询会应用分页查询，并且可携带多个条件查询参数</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span>  </span><br><span class="line"><span class="keyword">public</span> PageBean <span class="title function_">getEmp</span><span class="params">(Integer page, Integer pageSize, String name, Short gender, LocalDate begin, LocalDate end)</span> &#123;  </span><br><span class="line">    PageHelper.startPage(page, pageSize);  </span><br><span class="line">    List&lt;Emp&gt; list = empMapper.listEmp(name,gender,begin,end);  </span><br><span class="line">    Page&lt;Emp&gt; p =(Page&lt;Emp&gt;) list;  </span><br><span class="line">    <span class="type">PageBean</span> <span class="variable">pageBean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PageBean</span>(p.getTotal(),p.getResult());  </span><br><span class="line">    <span class="keyword">return</span> pageBean;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>由于可变参数较多，这里选用XML映射完成sql语句</p>
<p>EmpMapper</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;Emp&gt; <span class="title function_">listEmp</span><span class="params">(String name, Short gender, LocalDate begin, LocalDate end)</span>;</span><br></pre></td></tr></table></figure>

<p>xml映射文件如何配置？（详见Mybatis）</p>
<ul>
<li><p>首先要与持久层同包同名</p>
</li>
<li><p>添加配置信息</p>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line">    <span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">    <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">    <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>配置Mapper接口的全限定名</p>
</li>
<li><p>添加sql语句</p>
</li>
</ul>
<p>这里的查询结构长这样</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> name <span class="keyword">like</span> concat(<span class="string">&#x27;%&#x27;</span>,<span class="string">&#x27;张&#x27;</span>,<span class="string">&#x27;%&#x27;</span>)  </span><br><span class="line">                    <span class="keyword">and</span> gender <span class="operator">=</span> <span class="number">1</span>  </span><br><span class="line">                    <span class="keyword">and</span> entrydate <span class="keyword">between</span> <span class="string">&#x27;2003-08-01&#x27;</span> <span class="keyword">and</span> <span class="string">&#x27;2020-01-01&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>使用mybatis提供标签完成动态sql</p>
<p>在接收前端传参时，对于页面结构（page, pageSize），我们设置了默认值，而其他条件查询条件，我们并没有设置默认值，因此默认为null，当判断字段为空时，sql语句不会拼接到总查询语句中</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.tlias.mapper.EmpMapper&quot;</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;listEmp&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.tlias.pojo.Emp&quot;</span>&gt;</span>  </span><br><span class="line">        select * from emp  </span><br><span class="line">         <span class="tag">&lt;<span class="name">where</span>&gt;</span>  </span><br><span class="line">             <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name != null&quot;</span>&gt;</span>  </span><br><span class="line">                 name like concat(&#x27;%&#x27;,#&#123;name&#125;,&#x27;%&#x27;)  </span><br><span class="line">             <span class="tag">&lt;/<span class="name">if</span>&gt;</span>  </span><br><span class="line">             <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;gender != null&quot;</span>&gt;</span>  </span><br><span class="line">                 and gender = #&#123;gender&#125;  </span><br><span class="line">             <span class="tag">&lt;/<span class="name">if</span>&gt;</span>  </span><br><span class="line">             <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;begin!= null and end != null&quot;</span>&gt;</span>  </span><br><span class="line">                and entrydate between #&#123;begin&#125; and #&#123;end&#125;  </span><br><span class="line">             <span class="tag">&lt;/<span class="name">if</span>&gt;</span>  </span><br><span class="line">         <span class="tag">&lt;/<span class="name">where</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>刷新页面，查询控制台中展示使用的sql语句为</p>
<p><code>==&gt; Preparing: select * from emp WHERE name like concat(&#39;%&#39;,?,&#39;%&#39;) LIMIT ?</code>但是当前我没有输入任何查询条件，为什么会拼接<code>WHERE name like concat(&#39;%&#39;,?,&#39;%&#39;)</code>？</p>
<p>调试后发现，name的值不是null，而是’’（空字符串），因此修改name的查询添加条件为<code>test=&quot;name != null and name!=&#39;&#39;&quot;</code></p>
<p>删除操作</p>
<p>支持批量删除，请求路径类似<code>/emps/16,15</code></p>
<p>又是路径携带参数，使用PathVariable注解获取并使用一个集合封装</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@DeleteMapping(&quot;/emps/&#123;id&#125;&quot;)</span>  </span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">DeleteEmp</span><span class="params">(<span class="meta">@PathVariable</span> List&lt;Integer&gt; id)</span> &#123;  </span><br><span class="line">    log.info(<span class="string">&quot;删除id=&#123;&#125;的员工&quot;</span>,id);  </span><br><span class="line">    empService.deleteEmps(id);  </span><br><span class="line">    <span class="keyword">return</span> Result.success();  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>逻辑层没什么内容，直接快进到sql配置</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">deleteEmp</span><span class="params">(List&lt;Integer&gt; ids)</span>;</span><br></pre></td></tr></table></figure>

<p>由于接收一个集合，需要使用foreach标签遍历获取内部成员，并完成语句拼接（详见Mybatis）</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteEmp&quot;</span>&gt;</span>  </span><br><span class="line">    delete from emp where id in  </span><br><span class="line">        <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;ids&quot;</span> <span class="attr">item</span>=<span class="string">&quot;id&quot;</span> <span class="attr">open</span>=<span class="string">&quot;(&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span>&gt;</span>  </span><br><span class="line">            id = #&#123;id&#125;  </span><br><span class="line">        <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>collection填图要遍历到的集合，也就是参数ids</p>
<p>item：遍历出的每一项</p>
<p>open：开头拼接字符</p>
<p>close：结尾拼接字符</p>
<p>separator：分隔符</p>
<h2 id="增（Emp）"><a href="#增（Emp）" class="headerlink" title="增（Emp）"></a>增（Emp）</h2><p>填写表单添加员工</p>
<p>EmpController</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/emps&quot;)</span>  </span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">AddEmp</span><span class="params">(<span class="meta">@RequestBody</span> Emp emp)</span> &#123;  </span><br><span class="line">    log.info(<span class="string">&quot;添加员工&#123;&#125;&quot;</span>,emp);   </span><br><span class="line">    empService.addEmp(emp);  </span><br><span class="line">    <span class="keyword">return</span> Result.success();  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>EmpService</p>
<p>create_time,update_time这两个字段的添加不用在这一步做，在这里调用java的now方法获取到的时间反而与目标格式不同</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addEmp</span><span class="params">(Emp emp)</span> &#123;</span><br><span class="line">        empMapper.addEmp(emp);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>EmpMapper</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Insert(&quot;insert into emp(username,name,gender,image,job,entrydate,dept_id,create_time,update_time) &quot; +  </span></span><br><span class="line"><span class="meta">        &quot;values(#&#123;username&#125;,#&#123;name&#125;,#&#123;gender&#125;,#&#123;image&#125;,#&#123;job&#125;,#&#123;entrydate&#125;,#&#123;deptId&#125;,now(),now())&quot;)</span>  </span><br><span class="line"><span class="keyword">void</span> <span class="title function_">addEmp</span><span class="params">(Emp emp)</span>;</span><br></pre></td></tr></table></figure>

<h2 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h2><p>将文件上传至服务器，分为前后端的上传操作</p>
<p>前端</p>
<p>通过表单提交文件</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/upload&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">enctype</span>=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;file&quot;</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Upload&quot;</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>action&#x3D;”&#x2F;upload”：提交路径</p>
</li>
<li><p>method&#x3D;”post”：使用post方式提交，由于文件一般较大，因此要使用post方式提交</p>
</li>
<li><p>enctype&#x3D;”multipart&#x2F;form-data”：表单编码格式，multipart&#x2F;form-data是HTTP协议中传输文件和文本字段的编码类型，允许浏览器在单个请求中发送键值对，其中至少一个值包含文件类型的数据，<strong>不添加此项会只传输一个文件名</strong></p>
</li>
<li><p>两个input分别代表需要上传的文件，确认按钮</p>
</li>
</ul>
<p>后端</p>
<p>接收文件</p>
<p>正常的post处理类，但是接收文件的参数类型<strong>MultipartFile</strong></p>
<blockquote>
<p>MultipartFile：Spring框架中用于处理文件上传的核心接口，它抽象了客户端上传的文件</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UploadController</span> &#123;  </span><br><span class="line">   <span class="meta">@PostMapping(&quot;/upload&quot;)</span>  </span><br><span class="line">   <span class="keyword">public</span> Result <span class="title function_">upload</span><span class="params">(String username, Integer age, MultipartFile image)</span> <span class="keyword">throws</span> IOException &#123;  </span><br><span class="line">       log.info(<span class="string">&quot;提交文件&quot;</span>);  </span><br><span class="line">       <span class="comment">//获取文件名  </span></span><br><span class="line">       <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span>  image.getOriginalFilename();  </span><br><span class="line">       <span class="comment">//保存文件到指定路径  </span></span><br><span class="line">       image.transferTo(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;E:\\IDEA_java\\test\\&quot;</span>+fileName));  </span><br><span class="line">       <span class="keyword">return</span> Result.success();  </span><br><span class="line">   &#125;&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>getOriginalFilename()：获取文件名（getName得到的是变量名）</p>
</li>
<li><p>transferTo()：用于将上传的文件保存到指定的文件路径，这样就将上传的文件从临时存储（通常是内存或磁盘上的临时目录）移动到一个永久的位置了</p>
</li>
</ul>
<p>这样就完成了基本的文件存储操作，但实际上，这个代码有一些问题：当我存入两个同名文件，前面的文件会被覆盖</p>
<p>容易想到的做法是，在文件名后添加当前时间来增加文件名的唯一性，但不排除恰恰恰好有两份同名文件在同一时间上传的可能，因此最好的解决办法是为每一个文件生成一个<strong>唯一</strong>识别码——uuid</p>
<blockquote>
<p>UUID（Universally Unique Identifier）是一个标准化的唯一性标识符，用于在分布式系统中无需中央协调就能保证唯一性。这种唯一是全球性的，即生成出的随机值不需要任何校验，肯定唯一</p>
<p>UUID的标准格式由32个十六进制数字组成，以连字符分为五组，形式为8-4-4-4-12，例如：123e4567-e89b-12d3-a456-426614174000</p>
<p>UUID的主要特点包括：</p>
<ol>
<li><p><strong>唯一性</strong>：由于UUID的生成基于复杂的随机数生成器，因此UUID的生成是自包含的，不需要与中央服务器通信来避免重复</p>
</li>
<li><p><strong>通用性</strong>：UUID可用于任何需要唯一标识符的场合，包括但不限于数据库关键字、硬件地址、网络协议标识符等</p>
</li>
<li><p><strong>信息量</strong>：UUID包含128位的信息，提供了极大的唯一性保证</p>
</li>
<li><p><strong>无序性</strong>：UUID不包含顺序信息，因此不能用于生成有序的关键字</p>
</li>
</ol>
</blockquote>
<p>修改后代码如下：实际上只是在调整文件名</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UploadController</span> &#123;</span><br><span class="line">    <span class="meta">@PostMapping(&quot;/upload&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">upload</span><span class="params">(String username, Integer age, MultipartFile image)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        log.info(<span class="string">&quot;提交文件&quot;</span>);</span><br><span class="line">        <span class="comment">//获取后缀.xxx所在位置</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> image.getOriginalFilename().lastIndexOf(<span class="string">&quot;.&quot;</span>);</span><br><span class="line">        <span class="comment">//分割后缀</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">extName</span> <span class="operator">=</span> image.getOriginalFilename().substring(index);</span><br><span class="line">        <span class="comment">//拼接随机码与后缀</span></span><br><span class="line">        extName = UUID.randomUUID().toString()+extName;</span><br><span class="line">        <span class="comment">//存文件</span></span><br><span class="line">        image.transferTo(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;E:\\IDEA_java\\test\\&quot;</span>+extName));</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>lastIndexOf()：用于匹配字符串中&#x2F;最后一个&#x2F;与给定字符串相同的子串&#x2F;的位置</p>
</li>
<li><p>substring()：字符串分割，一个参数时返回从给定位置到结尾的子串</p>
</li>
</ul>
<p>在上传一个比较大的文件时，发现服务器端报错了：原因在于服务器限制了单次传输的文件大小，默认最大为1MB,可以在配置文件中设置大小</p>
<p>关键词：<strong>multipart</strong></p>
<p>单次传输限制：spring.servlet.multipart.max-file-size&#x3D;10MB</p>
<p>多文件传输总大小限制：spring.servlet.multipart.max-request-size&#x3D;100MB</p>
<p>这样的存储方式称为本地存储，当数据量较大时并不易于使用，一般会使用一套独立的存储系统，可以自己搭建（FastDFS、MinIO），也可以使用现成的云存储服务：阿里云OSS（对象存储服务）</p>
<p>服务开通完成后，记下accessKey Id 与accessKey Secret，这是使用自己Bucket的凭证，上传文件时，需提供这两项信息</p>
<p>创建一个工具类用于向服务器提交文件，使用Component注解将其添加入ioc容器</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AliOSSUtils</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">endpoint</span> <span class="operator">=</span> <span class="string">&quot;https://oss-cn-guangzhou.aliyuncs.com&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">bucketName</span> <span class="operator">=</span> <span class="string">&quot;mogu-tlias&quot;</span>;</span><br><span class="line">    <span class="comment">//从环境变量中获取凭证</span></span><br><span class="line">    <span class="type">EnvironmentVariableCredentialsProvider</span> <span class="variable">credentialsProvider</span> <span class="operator">=</span> CredentialsProviderFactory.newEnvironmentVariableCredentialsProvider();</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">AliOSSUtils</span><span class="params">()</span> <span class="keyword">throws</span> ClientException &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 实现上传图片到OSS</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">upload</span><span class="params">(MultipartFile file)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// 获取上传的文件的输入流</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> file.getInputStream();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 避免文件覆盖</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">originalFilename</span> <span class="operator">=</span> file.getOriginalFilename();</span><br><span class="line">        <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> UUID.randomUUID().toString() + originalFilename.substring(originalFilename.lastIndexOf(<span class="string">&quot;.&quot;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//上传文件到 OSS</span></span><br><span class="line">        <span class="type">OSS</span> <span class="variable">ossClient</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OSSClientBuilder</span>().build(endpoint, credentialsProvider);</span><br><span class="line">        ossClient.putObject(bucketName, fileName, inputStream);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//文件访问路径</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> endpoint.split(<span class="string">&quot;//&quot;</span>)[<span class="number">0</span>] + <span class="string">&quot;//&quot;</span> + bucketName + <span class="string">&quot;.&quot;</span> + endpoint.split(<span class="string">&quot;//&quot;</span>)[<span class="number">1</span>] + <span class="string">&quot;/&quot;</span> + fileName;</span><br><span class="line">        <span class="comment">// 关闭ossClient</span></span><br><span class="line">        ossClient.shutdown();</span><br><span class="line">        <span class="keyword">return</span> url;<span class="comment">// 把上传到oss的路径返回</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>调用工具类的upload方法即可完成文件上传，要注意处理的是post方法，同时接收文件使用的变量类型为MultipartFile</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/upload&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">upload</span><span class="params">(MultipartFile image)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        log.info(<span class="string">&quot;上传文件&#123;&#125;&quot;</span>,image.getOriginalFilename());</span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span>  aliOSSUtils.upload(image);</span><br><span class="line">        log.info(<span class="string">&quot;上传完成，文件名&#123;&#125;&quot;</span>,url);</span><br><span class="line">        <span class="keyword">return</span> Result.success(url);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="https://szymogu.github.io">Mogu</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="https://szymogu.github.io/2025/07/12/JavaWeb_%E7%AE%80%E5%8D%95demo/">https://szymogu.github.io/2025/07/12/JavaWeb_%E7%AE%80%E5%8D%95demo/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Web%E5%90%8E%E7%AB%AF/">Web后端</a></div><div class="post_share"><div class="social-share" data-image="/pic/default_cover/424358.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2025/07/18/Java_%E5%BC%82%E5%B8%B8/" title="Java_异常"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/pic/default_cover/824618.png" onerror="onerror=null;src='https://i0.hdslb.com/bfs/static/laputa-search/assets/neterror.65668da4.png'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous</div><div class="prev_info">Java_异常</div></div></a></div><div class="next-post pull-right"><a href="/2025/07/12/JavaWeb_Mybatis/" title="JavaWeb_Mybatis"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/pic/default_cover/67603.png" onerror="onerror=null;src='https://i0.hdslb.com/bfs/static/laputa-search/assets/neterror.65668da4.png'" alt="cover of next post"><div class="pagination-info"><div class="label">Next</div><div class="next_info">JavaWeb_Mybatis</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><div><a href="/2024/08/10/JavaWeb_Maven/" title="JavaWeb_初识Maven"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/pic/default_cover/42676.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-08-10</div><div class="title">JavaWeb_初识Maven</div></div></a></div><div><a href="/2025/07/23/JavaWeb_Maven%E9%AB%98%E7%BA%A7/" title="JavaWeb_Maven高级"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/pic/default_cover/664698.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2025-07-23</div><div class="title">JavaWeb_Maven高级</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/pic/touxiang.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Mogu</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">51</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">42</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">17</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Szymogu"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">I❤️BlueArchive！</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5"><span class="toc-number">1.</span> <span class="toc-text">查</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A0"><span class="toc-number">2.</span> <span class="toc-text">删</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Controller"><span class="toc-number">2.1.</span> <span class="toc-text">Controller</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Service"><span class="toc-number">2.2.</span> <span class="toc-text">Service</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Mapper"><span class="toc-number">2.3.</span> <span class="toc-text">Mapper</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A2%9E"><span class="toc-number">3.</span> <span class="toc-text">增</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Controller-1"><span class="toc-number">3.1.</span> <span class="toc-text">Controller</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Service-1"><span class="toc-number">3.2.</span> <span class="toc-text">Service</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Mapper-1"><span class="toc-number">3.3.</span> <span class="toc-text">Mapper</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%94%B9"><span class="toc-number">4.</span> <span class="toc-text">改</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%95%E7%A4%BA%E6%95%B0%E6%8D%AE"><span class="toc-number">4.1.</span> <span class="toc-text">展示数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE"><span class="toc-number">4.2.</span> <span class="toc-text">修改数据</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2"><span class="toc-number">5.</span> <span class="toc-text">分页查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#pagehelper"><span class="toc-number">5.1.</span> <span class="toc-text">pagehelper</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%8C%E6%88%90%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2"><span class="toc-number">6.</span> <span class="toc-text">完成条件查询</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A2%9E%EF%BC%88Emp%EF%BC%89"><span class="toc-number">7.</span> <span class="toc-text">增（Emp）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="toc-number">8.</span> <span class="toc-text">文件上传</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/07/29/Springboot%E5%AE%9E%E6%88%98_day5/" title="Springboot实战_day5"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/pic/default_cover/196577.png" onerror="this.onerror=null;this.src='https://i0.hdslb.com/bfs/static/laputa-search/assets/neterror.65668da4.png'" alt="Springboot实战_day5"/></a><div class="content"><a class="title" href="/2025/07/29/Springboot%E5%AE%9E%E6%88%98_day5/" title="Springboot实战_day5">Springboot实战_day5</a><time datetime="2025-07-28T21:18:38.000Z" title="Created 2025-07-29 05:18:38">2025-07-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/07/28/Springboot%E5%AE%9E%E6%88%98_day3&amp;4/" title="Springboot实战_day3&amp;4"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/pic/default_cover/569411.png" onerror="this.onerror=null;this.src='https://i0.hdslb.com/bfs/static/laputa-search/assets/neterror.65668da4.png'" alt="Springboot实战_day3&amp;4"/></a><div class="content"><a class="title" href="/2025/07/28/Springboot%E5%AE%9E%E6%88%98_day3&amp;4/" title="Springboot实战_day3&amp;4">Springboot实战_day3&amp;4</a><time datetime="2025-07-27T16:16:53.000Z" title="Created 2025-07-28 00:16:53">2025-07-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/07/25/Springboot%E5%AE%9E%E6%88%98_day2/" title="Springboot项目实战_day2"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/pic/default_cover/690897.png" onerror="this.onerror=null;this.src='https://i0.hdslb.com/bfs/static/laputa-search/assets/neterror.65668da4.png'" alt="Springboot项目实战_day2"/></a><div class="content"><a class="title" href="/2025/07/25/Springboot%E5%AE%9E%E6%88%98_day2/" title="Springboot项目实战_day2">Springboot项目实战_day2</a><time datetime="2025-07-24T19:50:39.000Z" title="Created 2025-07-25 03:50:39">2025-07-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/07/24/SpringBoot%E5%AE%9E%E6%88%98_day1/" title="SpringBoot实战_day1"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/pic/default_cover/664698.png" onerror="this.onerror=null;this.src='https://i0.hdslb.com/bfs/static/laputa-search/assets/neterror.65668da4.png'" alt="SpringBoot实战_day1"/></a><div class="content"><a class="title" href="/2025/07/24/SpringBoot%E5%AE%9E%E6%88%98_day1/" title="SpringBoot实战_day1">SpringBoot实战_day1</a><time datetime="2025-07-23T17:09:40.000Z" title="Created 2025-07-24 01:09:40">2025-07-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/07/23/JavaWeb_Maven%E9%AB%98%E7%BA%A7/" title="JavaWeb_Maven高级"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/pic/default_cover/664698.png" onerror="this.onerror=null;this.src='https://i0.hdslb.com/bfs/static/laputa-search/assets/neterror.65668da4.png'" alt="JavaWeb_Maven高级"/></a><div class="content"><a class="title" href="/2025/07/23/JavaWeb_Maven%E9%AB%98%E7%BA%A7/" title="JavaWeb_Maven高级">JavaWeb_Maven高级</a><time datetime="2025-07-22T19:05:18.000Z" title="Created 2025-07-23 03:05:18">2025-07-23</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@17.8.8/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.js"></script><div class="js-pjax"></div><div class="aplayer no-destroy" data-id="10187364968" data-server="netease" data-type="playlist" data-fixed="true" data-autoplay="false" mini = "true" order="random" data-theme="#87faac"> </div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/metingjs/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener
  btf.removeGlobalFnEvent('pjax')
  btf.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>